<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Argument Encoding - Fuel Specifications</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../fuel-specs.html">Fuel Specifications</a></li><li class="chapter-item expanded "><a href="../../protocol/index.html"><strong aria-hidden="true">1.</strong> Protocol</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../protocol/tx_format/index.html"><strong aria-hidden="true">1.1.</strong> Transaction Format</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../protocol/tx_format/constants.html"><strong aria-hidden="true">1.1.1.</strong> Constants</a></li><li class="chapter-item expanded "><a href="../../protocol/tx_format/transaction.html"><strong aria-hidden="true">1.1.2.</strong> Transaction</a></li><li class="chapter-item expanded "><a href="../../protocol/tx_format/input.html"><strong aria-hidden="true">1.1.3.</strong> Input</a></li><li class="chapter-item expanded "><a href="../../protocol/tx_format/output.html"><strong aria-hidden="true">1.1.4.</strong> Output</a></li><li class="chapter-item expanded "><a href="../../protocol/tx_format/witness.html"><strong aria-hidden="true">1.1.5.</strong> Witness</a></li><li class="chapter-item expanded "><a href="../../protocol/tx_format/tx_pointer.html"><strong aria-hidden="true">1.1.6.</strong> TXPointer</a></li></ol></li><li class="chapter-item expanded "><a href="../../protocol/id/index.html"><strong aria-hidden="true">1.2.</strong> Computing Identifiers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../protocol/id/transaction.html"><strong aria-hidden="true">1.2.1.</strong> Transaction ID</a></li><li class="chapter-item expanded "><a href="../../protocol/id/contract.html"><strong aria-hidden="true">1.2.2.</strong> Contract ID</a></li><li class="chapter-item expanded "><a href="../../protocol/id/utxo.html"><strong aria-hidden="true">1.2.3.</strong> UTXO ID</a></li></ol></li><li class="chapter-item expanded "><a href="../../protocol/tx_validity.html"><strong aria-hidden="true">1.3.</strong> Transaction Validity Rules</a></li><li class="chapter-item expanded "><a href="../../protocol/cryptographic_primitives.html"><strong aria-hidden="true">1.4.</strong> Cryptographic Primitives</a></li><li class="chapter-item expanded "><a href="../../protocol/abi/index.html"><strong aria-hidden="true">1.5.</strong> Application Binary Interface (ABI)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../protocol/abi/json_abi_format.html"><strong aria-hidden="true">1.5.1.</strong> JSON ABI Format</a></li><li class="chapter-item expanded "><a href="../../protocol/abi/receipts.html"><strong aria-hidden="true">1.5.2.</strong> Receipts</a></li><li class="chapter-item expanded "><a href="../../protocol/abi/fn_selector_encoding.html"><strong aria-hidden="true">1.5.3.</strong> Function Selector Encoding</a></li><li class="chapter-item expanded "><a href="../../protocol/abi/argument_encoding.html" class="active"><strong aria-hidden="true">1.5.4.</strong> Argument Encoding</a></li></ol></li><li class="chapter-item expanded "><a href="../../protocol/storage_initialization.html"><strong aria-hidden="true">1.6.</strong> Storage Slot Initialization</a></li><li class="chapter-item expanded "><a href="../../protocol/block_header.html"><strong aria-hidden="true">1.7.</strong> Block Header Format</a></li></ol></li><li class="chapter-item expanded "><a href="../../vm/index.html"><strong aria-hidden="true">2.</strong> FuelVM</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../vm/instruction_set.html"><strong aria-hidden="true">2.1.</strong> Instruction Set</a></li></ol></li><li class="chapter-item expanded "><a href="../../network/index.html"><strong aria-hidden="true">3.</strong> Networks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../network/poa.html"><strong aria-hidden="true">3.1.</strong> Proof of Authority (PoA)</a></li></ol></li><li class="chapter-item expanded "><a href="../../tests/index.html"><strong aria-hidden="true">4.</strong> Testing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tests/sparse_merkle_tree_tests.html"><strong aria-hidden="true">4.1.</strong> Sparse Merkle Tree</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Fuel Specifications</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/FuelLabs/fuel-specs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="argument-encoding"><a class="header" href="#argument-encoding">Argument Encoding</a></h1>
<p>When crafting transaction script data, you must encode the arguments you wish to pass to the script.</p>
<h2 id="types"><a class="header" href="#types">Types</a></h2>
<p>These are the available types that can be encoded in the ABI:</p>
<ul>
<li>Unsigned integers:
<ul>
<li><code>u8</code>, 8 bits.</li>
<li><code>u16</code>, 16 bits.</li>
<li><code>u32</code>, 32 bits.</li>
<li><code>u64</code>, 64 bits.</li>
</ul>
</li>
<li>Boolean: <code>bool</code>, either <code>0</code> or <code>1</code> encoded identically to <code>u8</code>.</li>
<li>B256: <code>b256</code>, arbitrary 256-bits value.</li>
<li>Address : <code>address</code>, a 256-bit (32-byte) address.</li>
<li>Fixed size string</li>
<li>Array</li>
<li>Enums (sum types)</li>
<li>Structs</li>
</ul>
<p>These types are encoded in-place. Here's how to encode them. We define <code>enc(X)</code> the encoding of the type <code>X</code>.</p>
<h2 id="unsigned-integers"><a class="header" href="#unsigned-integers">Unsigned Integers</a></h2>
<p><code>u&lt;M&gt;</code> where <code>M</code> is either 8, 16, 32, or 64 bits.</p>
<p><code>enc(X)</code> is the big-endian (i.e. right-aligned) representation of <code>X</code> left-padded with zero-bytes. Total length must be 8 bytes.</p>
<blockquote>
<p><strong>Note:</strong> since all integer values are unsigned, there is no need to preserve the sign when extending/padding; padding with only zeroes is sufficient._</p>
</blockquote>
<p><strong>Example:</strong></p>
<p>Encoding <code>42</code> yields: <code>0x000000000000002a</code>, which is the hexadecimal representation of the decimal number <code>42</code>, right-aligned to 8 bytes.</p>
<h2 id="boolean"><a class="header" href="#boolean">Boolean</a></h2>
<p><code>enc(X)</code> is <code>0</code> if <code>X</code> is false or <code>1</code> if <code>X</code> is true, left-padded with zero-bytes. Total length must be 8 bytes. Similar to the <code>u8</code> encoding.</p>
<p><strong>Example:</strong></p>
<p>Encoding <code>true</code> yields:</p>
<pre><code class="language-text">0x0000000000000001
</code></pre>
<h2 id="b256"><a class="header" href="#b256">B256</a></h2>
<p><code>b256</code> is a fixed size bit array of length 256. Used for 256-bit hash digests and other 256-bit types. It is encoded as-is.</p>
<p><strong>Example:</strong></p>
<p>Encoding <code>0xc7fd1d987ada439fc085cfa3c49416cf2b504ac50151e3c2335d60595cb90745</code> yields:</p>
<pre><code class="language-text">0xc7fd1d987ada439fc085cfa3c49416cf2b504ac50151e3c2335d60595cb90745
</code></pre>
<h2 id="address"><a class="header" href="#address">Address</a></h2>
<p>A 256-bit (32-byte) address, encoded in the same way as a <code>b256</code> argument: encoded as-is.</p>
<p><strong>Example:</strong></p>
<p>Encoding <code>0xc7fd1d987ada439fc085cfa3c49416cf2b504ac50151e3c2335d60595cb90745</code> yields:</p>
<pre><code class="language-text">0xc7fd1d987ada439fc085cfa3c49416cf2b504ac50151e3c2335d60595cb90745
</code></pre>
<h2 id="array"><a class="header" href="#array">Array</a></h2>
<p>An array of a certain type <code>T</code>, <code>[T; n]</code>, where <code>n</code> is the length of the array.</p>
<p>Arrays in Sway have a fixed-length which is known at compile time. This means the ABI encoding for arrays also happens in-place, with no need to account for dynamic sizing.</p>
<p>The encoding for the array contains, in order, the encoding of each element in <code>[T; n]</code>, recursively following the encoding for the type <code>T</code>.</p>
<p>For instance, consider the function signature <code>my_func(bool, [u64; 2])</code> with the values <code>(true, [1, 2])</code>.</p>
<p>The encoding will be:</p>
<ol>
<li><code>0x0000000000000001</code>, the <code>true</code> bool encoded in-place.</li>
<li><code>0x0000000000000001</code>, First element of the parameter <code>[u64; 2]</code>, <code>1</code>, encoded as a <code>u64</code>.</li>
<li><code>0x0000000000000002</code>, Second element of the parameter <code>[u64; 2]</code>, <code>2</code>, encoded as a <code>u64</code>.</li>
</ol>
<p>The resulting encoded ABI will be:</p>
<pre><code class="language-text">0x000000000000000100000000000000010000000000000002
</code></pre>
<h2 id="fixed-length-strings"><a class="header" href="#fixed-length-strings">Fixed-length Strings</a></h2>
<p>Strings have fixed length and are encoded in-place. <code>str[n]</code>, where <code>n</code> is the fixed-size of the string. Rather than padding the string, the encoding of the elements of the string is tightly packed. And unlike the other type encodings, the string encoding is left-aligned.</p>
<p>Note that all strings are encoded in UTF-8.</p>
<p><strong>Example:</strong></p>
<p>Encoding <code>&quot;Hello, World&quot;</code> as a <code>str[12]</code> <strong>yields</strong>:</p>
<pre><code class="language-text">0x48656c6c6f2c20576f726c6400000000
</code></pre>
<p>Note that we're padding with zeroes in order to keep it right-aligned to 8 bytes (FuelVM's word size).</p>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<p>Encoding ABIs that contain custom types, such as structs, is similar to encoding a set of primitive types. The encoding will proceed in the order that the inner types of a custom type are declared and <em>recursively</em> just like encoding any other type. This way you can encode structs with primitive types or structs with more complex types in them such as other structs, arrays, strings, and enums.</p>
<p>Here's an example:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct InputStruct {
    field_1: bool,
    field_2: u8,
}


abi MyContract {
    fn foo(a: u64);
    fn bar(a: InputStruct);
} {
    fn baz(a: ()) { }
}
<span class="boring">}
</span></code></pre></pre>
<p>Calling <code>bar</code> with <code>InputStruct { field_1: true, field_2: 5 }</code> yields:</p>
<pre><code class="language-plaintext">0x
0000000000000001 // `true` encoded as a bool
0000000000000005 // `5` encoded as u8
</code></pre>
<p>A more complex scenario:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct InputStruct {
    field_1: bool,
    field_2: [u8; 2], // An array of u8, with length 2.
}


abi MyContract {
    fn foo(a: u64);
    fn bar(a: InputStruct);
} {
    fn baz(a: ()) { }
}
<span class="boring">}
</span></code></pre></pre>
<p>Calling <code>bar</code> with <code>InputStruct { field_1: true, field_2: [1, 2] }</code> yields:</p>
<pre><code class="language-plaintext">0x
0000000000000001 // `true` encoded as a bool
0000000000000001 // `1` encoded as u8
0000000000000002 // `2` encoded as u8
</code></pre>
<h2 id="enums-sum-types"><a class="header" href="#enums-sum-types">Enums (sum types)</a></h2>
<p>ABI calls containing enums (sum types) are encoded similarly to structs: encode the discriminant first, then recursively encode the type of the enum variant being passed to the function being called.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum MySumType
{
    X: u32,
    Y: bool,
}

abi MyContract {
    fn foo(a: u64);
    fn bar(a: MySumType);
} {
    fn baz(a: ()) { }
}
<span class="boring">}
</span></code></pre></pre>
<p>Calling <code>bar</code> with <code>MySumType::X(42)</code> yields:</p>
<pre><code class="language-plaintext">0x
0000000000000000 // The discriminant of the chosen enum, in this case `0`.
000000000000002a // `42` encoded as u64
</code></pre>
<p>If the sum type has variants of different sizes, then left padding is required.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum MySumType
{
    X: b256,
    Y: u32,
}

abi MyContract {
    fn foo(a: u64);
    fn bar(a: MySumType);
} {
    fn baz(a: ()) { }
}
<span class="boring">}
</span></code></pre></pre>
<p>Calling <code>bar</code> with <code>MySumType::Y(42)</code> yields:</p>
<pre><code class="language-plaintext">0x
0000000000000001 // The discriminant of the chosen enum, in this case `1`.
0000000000000000 // Left padding
0000000000000000 // Left padding
0000000000000000 // Left padding
000000000000002a // `42` encoded as u64
</code></pre>
<p>Note that three words of padding are required because the largest variant of <code>MySumType</code> is 4 words wide.</p>
<p>If all the variants of a sum type are of type <code>()</code>, or unit, then only the discriminant needs to be encoded.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum MySumType
{
    X: (),
    Y: (),
    Z: (),
}

abi MyContract {
    fn foo(a: u64);
    fn bar(a: MySumType);
} {
    fn baz(a: ()) { }
}
<span class="boring">}
</span></code></pre></pre>
<p>Calling <code>bar</code> with <code>MySumType::Z</code> yields:</p>
<pre><code class="language-plaintext">0x
0000000000000002 // The discriminant of the chosen enum, in this case `2`.
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../protocol/abi/fn_selector_encoding.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../protocol/storage_initialization.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../protocol/abi/fn_selector_encoding.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../protocol/storage_initialization.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
